#!/usr/bin/env bash

# Docker login
if [ "${DOCKER_USERNAME}" != "" ] && [ "${DOCKER_PASSWORD}" != "" ]; then
  echo "${DOCKER_PASSWORD:-none}" | docker login -u "${DOCKER_USERNAME:-none}" --password-stdin ${DOCKER_REGISTRY} > /dev/null 2>&1
  if [ "$?" != "0" ]; then
    echo -e "\\e[33m~ Docker credentials are invalid. Registry won't be available ~\\e[0m"
  fi
fi

exec bash $@
